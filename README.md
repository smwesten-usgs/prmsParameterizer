## prmsParameterizer
===
Random code aimed at generating parameters for the USGS PRMS model.

# THIS CODE IS NOT PRODUCTION QUALITY AND IS PRESENTED AS AN EXAMPLE ONLY!

The R package and data files in this repository are presented as an example of how R code might be used to programmatically generate a set of parameters for the USGS Precipitation Runoff Simulation Model.

The strategy relies on a number of external files, including:

1) hydrologic response unit shapefile and/or grid file,
2) a *.par_name file, generated when one runs the PRMS model with the '-print' option,
3) ASCII gridded files of any relevant data types, including landuse, soil types, available water capacities, etc.

The 'estimate_black_earth_parameters.R' file operates in a number of phases. It starts out by loading the relevant GIS data layers and most importantly, the '.par_name' file generated by PRMS. *The script will not generate parameters or dimensions that are not included in this file!* For obvious reasons, it doesn't make sense to generate a bunch of parameters that the current version of the PRMS code doesn't understand.

The second phase of operation involves performing essentially zonal averages of various gridded data by the HRUs defined in the externally generated shapefile. Once these zonal statistics have been calculated, the script assigns parameters to the HRUs on the basis of user-generated functions. For example, the runoff coefficients in the example script are determined on the basis of the majority landuse type present in each HRU. This is very similar to how the original GIS Weasel (Viger and Leavesley, 2007) operated, except that the functions are coded in R rather than the now-dead ESRI Arc Macro Language (AML).

The third phase of script operation involves writing the new parameters out to a new PRMS parameter file. Finally, and optionally, a set of parameter maps may be generated to help visualize the spatial distribution of the new parameter values.

A number of ugly hard-wired variables are present in the example file; mostly these have to do with the dimensionality of the problem (i.e. number of active HRUs, number of groundwater reservoirs, number of surface-water cascades, etc.) A potential user of this example script would likely be best served by starting an entirely new script, taking bits and pieces of the example script as they proceed.

__The parameter values and parameter generation methods contained in this example are not necessarily appropriate for use in this or any other simulation. Proceed with caution!__

##Disclaimer
This software is in the public domain because it contains materials that originally came from the U.S. Geological Survey, an agency of the United States Department of Interior. For more information, see the [official USGS copyright policy](https://www.usgs.gov/visual-id/credit_usgs.html#copyright/ "official USGS copyright policy")

Although this software program has been used by the U.S. Geological Survey (USGS), no warranty, expressed or implied, is made by the USGS or the U.S. Government as to the accuracy and functioning of the program and related program material nor shall the fact of distribution constitute any such warranty, and no responsibility is assumed by the USGS in connection therewith.

This software is provided "AS IS."



